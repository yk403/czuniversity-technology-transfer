<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itts.personTraining.mapper.kc.KcMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.itts.personTraining.model.kc.Kc">
        <id column="id" property="id" />
        <result column="jylx" property="jylx" />
        <result column="xylx" property="xylx" />
        <result column="zsmk_id" property="zsmkId" />
        <result column="kcmc" property="kcmc" />
        <result column="kcdm" property="kcdm" />
        <result column="kclx" property="kclx" />
        <result column="kcxs" property="kcxs" />
        <result column="kcxf" property="kcxf" />
        <result column="kkxq" property="kkxq" />
        <result column="kkxy" property="kkxy" />
        <result column="skfs" property="skfs" />
        <result column="sfbx" property="sfbx" />
        <result column="bz" property="bz" />
        <result column="sfsc" property="sfsc" />
        <result column="cjsj" property="cjsj" />
        <result column="cjr" property="cjr" />
        <result column="gxsj" property="gxsj" />
        <result column="gxr" property="gxr" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, js_id, jylx, xylx, zsmk_id, jsxm, zsmkmc, kcmc, kcdm, kclx, kcxs, kcxf, kkxq, kkxy, skfs, sfbx, bz, sczt, cjsj, cjr, gxsj, gxr
    </sql>

    <select id="findByPage" resultType="com.itts.personTraining.dto.KcDTO">
        select kc.id as id,xylx,zsmk_id as zsmkId,jylx,kcmc,kcdm,kclx,kcxs,kcxf,kkxq,kkxy,skfs,jxjy,jcfj,kj,ja,kjsp,sp,sfbx,bz,sfxf,cjsj,cjr,gxsj,gxr
        from t_kc kc
        <where>
            kc.sfsc = false
            <if test="kclx != null and kclx != ''"> and kc.kclx like #{kclx} </if>
            <if test="name != null and name != ''"> and kc.kcdm like concat('%',#{kcdm},'%') </if>
            <if test="name != null and name != ''"> or kc.kcmc like concat('%',#{name},'%') </if>
        </where>
        order by kc.cjsj desc
    </select>
</mapper>
