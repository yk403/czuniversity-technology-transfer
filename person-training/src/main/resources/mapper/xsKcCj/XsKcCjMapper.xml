<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itts.personTraining.mapper.xsKcCj.XsKcCjMapper">

    <!-- 通用查询映射结果 -->
    <resultMap id="BaseResultMap" type="com.itts.personTraining.model.xsKcCj.XsKcCj">
        <id column="id" property="id" />
        <result column="xs_cj_id" property="xsCjId" />
        <result column="kc_id" property="kcId" />
        <result column="kclx" property="kclx" />
        <result column="kcdm" property="kcdm" />
        <result column="kcmc" property="kcmc" />
        <result column="sfbx" property="sfbx" />
        <result column="xwk" property="xwk" />
        <result column="dqxf" property="dqxf" />
        <result column="cj" property="cj" />
        <result column="xxxq" property="xxxq" />
        <result column="cjsx" property="cjsx" />
        <result column="bkcj" property="bkcj" />
        <result column="sfsc" property="sfsc" />
        <result column="bz" property="bz" />
        <result column="cjsj" property="cjsj" />
        <result column="cjr" property="cjr" />
        <result column="gxsj" property="gxsj" />
        <result column="gxr" property="gxr" />
    </resultMap>

    <!-- 通用查询结果列 -->
    <sql id="Base_Column_List">
        id, xs_cj_id, kc_id, txkc.kclx, kcdm, kcmc, sfbx, xwk, dqxf, cj, xxxq, cjsx, bkcj, sfsc, bz, cjsj, cjr, gxsj, gxr
    </sql>
    <select id="selectByXsCjId" resultType="com.itts.personTraining.dto.XsKcCjDTO">
        select txkc.id, xs_cj_id, kc_id, txkc.kclx, kc.kcxs, kc.kcxf, kc.kcdm, kc.kcmc, kc.sfbx, xwk, dqxf, cj, xxxq, cjsx, bkcj, txkc.bz, txkc.cjsj, txkc.cjr, txkc.gxsj, txkc.gxr
        from t_xs_kc_cj txkc left join t_kc kc on (txkc.kc_id=kc.id) left join t_xs_cj txc on (txc.id=txkc.xs_cj_id)
        where txkc.sfsc = false and kc.sfsc = false and txc.sfsc = false
        <if test="xsCjId != null"> and txkc.xs_cj_id = trim(#{xsCjId}) </if>
        <if test="kclx != null"> and txkc.kclx = trim(#{kclx}) </if>
        order by txkc.cjsj desc
    </select>
    <select id="selectYzyByXsCjId" resultType="com.itts.personTraining.dto.XsKcCjDTO">
        select *
        from t_xs_kc_cj txkc left join t_xs_cj txc on (txc.id=txkc.xs_cj_id)
        where txkc.sfsc = false and txc.sfsc = false
        <if test="xsCjId != null"> and txkc.xs_cj_id = #{xsCjId} </if>
        <if test="kclx != null"> and txkc.kclx = #{kclx} </if>
        order by txkc.cjsj desc
    </select>

</mapper>
